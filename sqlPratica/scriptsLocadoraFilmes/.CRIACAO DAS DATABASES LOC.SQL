CREATE DATABASE LOCADORA;

CREATE TABLE IF NOT EXISTS TB_FILME(
    
    COD_FILME INT AUTO_INCREMENT,
	NOME VARCHAR(100),
    NOME_ORIGINAL VARCHAR(100),
    ANO INT (4),
	DURACAO_MINUTOS INT,
    PRECO_SUGERIDO_LOCACAO FLOAT(10,2),
	CENSURA INT NOT NULL,
    PRIMARY KEY(COD_FILME)

);

CREATE TABLE IF NOT EXISTS TB_CLIENTE(

	COD_CLIENTE INT AUTO_INCREMENT,
    CLIENTE_TITULAR INT,
    NOME VARCHAR(60),
    TELEFONE VARCHAR(20),
    ENDERECO VARCHAR(60),
    CIDADE VARCHAR(20),
    UF CHAR(2),
    EMAIL VARCHAR(100),
	PRIMARY KEY(COD_CLIENTE)
);

CREATE TABLE IF NOT EXISTS TB_PROFISSIONAL_CINEMA(

    COD_PROFISSIONAL_CINEMA INT NOT NULL,
    NOME VARCHAR(30),
    DT_NASCIMENTO VARCHAR(45),
    PAIS_ORIGEM VARCHAR(20),
    PRIMARY KEY(COD_PROFISSIONAL_CINEMA)

);

CREATE TABLE TB_PAPEL(

	COD_PAPEL INT NOT NULL,
	DESCRICAO VARCHAR(60),
	PRIMARY KEY(COD_PAPEL)

);

CREATE TABLE IF NOT EXISTS TB_EXEMPLAR(
	
	COD_EXEMPLAR INT AUTO_INCREMENT,
    COD_FILME INT NOT NULL,
    PRIMARY KEY (COD_EXEMPLAR),
    FOREIGN KEY (COD_FILME) REFERENCES TB_FILME (COD_FILME)

);

CREATE TABLE TB_PARTICIPACAO(

	COD_PAPEL INT NOT NULL,
	COD_PROFISSIONAL_CINEMA INT NOT NULL,
	COD_FILME INT NOT NULL,
	FOREIGN KEY(COD_FILME) REFERENCES TB_FILME(COD_FILME)

);

CREATE TABLE TB_LOCACAO(

	COD_EXEMPLAR INT NOT NULL AUTO_INCREMENT,
	COD_CLIENTE INT NOT NULL,
	DT_SAIDA VARCHAR(15),
	DT_DEVOLUCAO VARCHAR(20),
	PRECO_APLICADO FLOAT(10,2),
	FOREIGN KEY (COD_EXEMPLAR) REFERENCES TB_EXEMPLAR(COD_EXEMPLAR),
	FOREIGN KEY (COD_CLIENTE) REFERENCES  TB_CLIENTE(COD_CLIENTE)

);


ALTER TABLE TB_PARTICIPACAO ADD CONSTRAINT TB_PARTICIPACAO
FOREIGN KEY(COD_PAPEL) REFERENCES TB_PAPEL(COD_PAPEL);

ALTER TABLE TB_PARTICIPACAO ADD CONSTRAINT
FOREIGN KEY(COD_PROFISSIONAL_CINEMA) REFERENCES TB_PROFISSIONAL_CINEMA(COD_PROFISSIONAL_CINEMA); 


ALTER TABLE TB_PARTICIPACAO ADD CONSTRAINT
FOREIGN KEY(COD_FILME) REFERENCES TB_FILME(COD_FILME);
















#BY ALVARO LIMA DE OLIVEIRA °°°°ºººº§
